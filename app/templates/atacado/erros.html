{% extends "./template.html" %} {% block content %}

<h3>Listagem de Erros do Atacado</h3>
<h4>Referente ao mês de {{ mes }}</h4>
<div
    class="resumo d-flex flex-column justify-content-center align-items-center align-self-center m-1 p-1 text-center"
>
    <div
        style="width: fit-content; margin: auto auto"
        class="align-items-center align-items-center align-self-center border-orange shadow m-3 p-2 h-25"
    >
        <h5>Erros por Funcionário</h5>
        <table
            style="margin: auto auto"
            class="tabela text-center align-items-center align-middle border-black"
        >
            <tr>
                <th>Funcionário</th>
                <th>Erros</th>
            </tr>
            {% for funcionario in erros_por_funcionario %}
            <tr>
                <td>{{ funcionario.erro_funcionario }}</td>
                <td>{{ funcionario.total_erros }}</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div class="table-responsive m-2 p-2 fs-12">
        <table
            class="shadow-lg table-bordered m-auto background-suave table-sm text-center align-middle border-black"
        >
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Funcionário</th>
                    <th>Cliente</th>
                    <th>Erros</th>

                    <th>Produtos</th>
                    <th>Descrição do erro</th>
                    <th>Criador</th>
                    <th class="botoesacao">Ação</th>
                </tr>
            </thead>
            {% for erro in erros %}
            <tbody>
                <tr>
                    <td>{{ erro.data_do_erro.strftime('%d/%m/%Y') }}</td>
                    <td>{{ erro.erro_funcionario }}</td>
                    <td>{{ erro.erro_cliente}}</td>
                    <td>{{ erro.quantidade_de_erros}}</td>
                    <td>{{ erro.produto_erro }}</td>
                    <td>{{ erro.descricao_do_erro }}</td>
                    <td>{{ erro.criador }}</td>
                    <td>
                        <form
                            action="/atacado/deletar_erro/{{ erro.id }}"
                            method="post"
                        >
                            <input
                                class="botoesacao btn btn-warning btn-sm mb-1"
                                type="submit"
                                value="Apagar"
                            />
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endblock %}
</div>
