{% extends "./template.html" %} {% block content %}
<h2 class="m-2">
    Transferências de {{data_inicial.strftime('%d/%m/%Y')}} á
    {{data_final.strftime('%d/%m/%Y')}}:
</h2>
<br />
<h4 class="m-2">Total de transferências do mês: {{total_transferencias}}.</h4>
<div
    class="d-flex flex-column align-items-center w-50 m-auto justify-content-center text-center mt-4"
>
    <h5>Notas de transferências por comprador:</h5>
    <table class="table-bordered mb-4 w-25 text-center align-middle">
        <thead>
            <tr>
                <th>Comprador</th>
                <th>Transferências</th>
            </tr>
        </thead>
        <tbody>
            {% for comprador, quantidade in transferencias_por_comprador %}
            <tr>
                <td>{{ comprador }}</td>
                <td>{{ quantidade }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="d-flex justify-content-center text-center">
    <div class="table-responsive w-100 p-3">
        <table class="table-bordered text-center min-vw-50 m-auto align-middle">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Nº Pedido</th>
                    <th>Loja</th>
                    <th>Tipo</th>
                    <th>Comprador</th>
                    <th>Observação</th>
                    <th>Ação</th>
                    <th class="botoesacao">Criador</th>
                </tr>
            </thead>
            {% for transferencia in transferencias %}
            <tbody>
                <tr>
                    <td>{{ transferencia.data.strftime('%d/%m/%Y') }}</td>
                    <td>{{ transferencia.pedido }}</td>
                    <td>{{transferencia.loja}}</td>
                    <td>{{transferencia.tipo}}</td>
                    <td>{{transferencia.comprador}}</td>
                    <td>{{transferencia.obs}}</td>

                    {% if current_user.is_authenticated and
                    current_user.username == transferencia.criador %}
                    <td class="flexNoBoards botoesacao">
                        <form
                            action="/transferencia/deletar/{{ transferencia.id }}"
                            method="get"
                        >
                            <input
                                class="btn btn-sm btn-warning"
                                type="submit"
                                value="Apagar"
                            />
                        </form>
                    </td>
                    {% else %}
                    <td class="flexNoBoards botoesacao"></td>
                    {% endif %}
                    <td>{{ transferencia.criador}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
